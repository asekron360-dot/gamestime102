<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Clean Master Antivirus</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    :root {
      --primary-color: #6c5ce7;
      --secondary-color: #a29bfe;
      --danger-color: #e74c3c;
      --success-color: #2dbe60;
    }

    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      color: #333;
      padding: 20px;
    }

    .navbar {
      background-color: #333;
    }

    .file-drop-zone {
      border: 2px dashed #aaa;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      border-radius: 5px;
      background-color: #f1f2f6;
      margin-bottom: 20px;
    }

    .file-drop-zone.dragover {
      background-color: #dfe6e9;
    }

    .scan-button {
      margin-top: 1rem;
    }

    .result {
      margin-top: 1.5rem;
    }

    .progress-bar {
      height: 20px;
    }

    .theme-toggle-btn {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: var(--primary-color);
      color: white;
      border-radius: 50%;
      padding: 10px;
      cursor: pointer;
    }

    .dark-theme {
      background-color: #2d3436;
      color: #fff;
    }
    
    .dark-theme .navbar {
      background-color: #333;
    }

    .dark-theme .file-drop-zone {
      background-color: #444;
      border-color: #ddd;
    }

    .dark-theme .scan-button {
      background-color: #333;
      color: white;
    }

  </style>
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg navbar-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Clean Master Antivirus</a>
    </div>
  </nav>

  <!-- Main content -->
  <div class="container">
    <div class="row">
      <div class="col-12 text-center">
        <h2>Dosya Tarayıcı</h2>
        <p>Dosyaları tarayarak virüsleri tespit edin!</p>
      </div>
    </div>

    <div class="row">
      <div class="col-12 col-md-6 offset-md-3">
        <div class="file-drop-zone" id="fileDropZone">
          <p><i class="fas fa-cloud-upload-alt fa-3x"></i></p>
          <p>Dosyaları sürükleyip bırakın veya tıklayın</p>
          <input type="file" id="fileInput" multiple class="d-none">
        </div>
        <div class="mt-3">
          <button id="scanButton" class="btn btn-primary scan-button" disabled><i class="fas fa-search"></i> Tarama Başlat</button>
        </div>
      </div>
    </div>

    <div id="scanResult" class="result"></div>

    <div id="progressBarWrapper" class="mt-3" style="display: none;">
      <div class="progress">
        <div id="progressBar" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%"></div>
      </div>
    </div>
  </div>

  <!-- Theme Toggle Button -->
  <button class="theme-toggle-btn" id="themeToggleBtn"><i class="fas fa-moon"></i></button>

  <!-- JavaScript -->
  <script src="https://code.jquery.com/jquery-3.7.0.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      const fileDropZone = document.getElementById('fileDropZone');
      const fileInput = document.getElementById('fileInput');
      const scanButton = document.getElementById('scanButton');
      const scanResult = document.getElementById('scanResult');
      const progressBar = document.getElementById('progressBar');
      const progressBarWrapper = document.getElementById('progressBarWrapper');
      const themeToggleBtn = document.getElementById('themeToggleBtn');
      
      let selectedFiles = [];

      // Tema değişimi
      themeToggleBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark-theme');
        if (document.body.classList.contains('dark-theme')) {
          themeToggleBtn.innerHTML = '<i class="fas fa-sun"></i>';
        } else {
          themeToggleBtn.innerHTML = '<i class="fas fa-moon"></i>';
        }
      });

      // Dosya seçme işlemi
      fileDropZone.addEventListener('click', () => {
        fileInput.click();
      });

      fileDropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        fileDropZone.classList.add('dragover');
      });

      fileDropZone.addEventListener('dragleave', () => {
        fileDropZone.classList.remove('dragover');
      });

      fileDropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        fileDropZone.classList.remove('dragover');
        selectedFiles = Array.from(e.dataTransfer.files);
        displayFiles();
      });

      fileInput.addEventListener('change', (e) => {
        selectedFiles = Array.from(e.target.files);
        displayFiles();
      });

      function displayFiles() {
        if (selectedFiles.length > 0) {
          scanButton.disabled = false;
          scanResult.innerHTML = '';
        }
      }

      // Tarama butonuna tıklanması
      scanButton.addEventListener('click', () => {
        scanButton.disabled = true;
        scanResult.innerHTML = '';
        progressBarWrapper.style.display = 'block';
        progressBar.style.width = '0%';

        let scannedFiles = 0;
        let infectedFiles = 0;
        const totalFiles = selectedFiles.length;

        selectedFiles.forEach((file, index) => {
          simulateScan(file, index + 1, totalFiles);
        });

        function simulateScan(file, fileIndex, totalFiles) {
          setTimeout(() => {
            scannedFiles++;
            progressBar.style.width = `${(scannedFiles / totalFiles) * 100}%`;

            const isInfected = Math.random() > 0.7; // Rasgele virüs tespiti (gerçek antivirüs motoru değil)
            const resultMessage = isInfected ? `<strong>${file.name}</strong> - Tehlikeli (Virüs Tespit Edildi)` : `<strong>${file.name}</strong> - Güvenli`;
            const resultClass = isInfected ? 'alert-danger' : 'alert-success';

            const resultHTML = `<div class="alert ${resultClass} mt-2">${resultMessage}</div>`;
            scanResult.innerHTML += resultHTML;

            if (scannedFiles === totalFiles) {
              progressBarWrapper.style.display = 'none';
              scanButton.disabled = false;
            }
          }, fileIndex * 500); // Her dosya için 0.5 saniye simülasyonu
        }
      });
    });
  </script>
</body>
</html>
